---
// Component Imports
import BaseHead from '../components/BaseHead.astro';
import SiteNameHeader from '../components/SiteNameHeader.astro';
import SongPreview from '../components/SongPreview.astro';
import Footer from '../components/Footer.astro';

interface MarkdownFrontmatter {
  publishDate: number;
}

// Component Script:
// You can write any JavaScript/TypeScript that you'd like here.
// It will run during the build, but never in the browser.
// All variables are available to use in the HTML template below.
let title = '看電影看劇時，聽到喜歡的音樂';
let description = '讓電影、日美劇致敬的 60 到 80 年代經典歌曲！';
let permalink = '';

// Data Fetching: List all Markdown posts in the repo.

let allSongs = await Astro.fetchContent('./*/*.md');
allSongs = allSongs.sort((a, b) => new Date(b.publishDate).valueOf() - new Date(a.publishDate).valueOf());
---

<html lang="zh-Hant-TW">
  <head>
    <BaseHead {title} {description} {permalink} />
  </head>
  <body>
    <SiteNameHeader />
    <main class="songs">
      <ul class="songsList">
        {allSongs.map((song) => <SongPreview song={song} />)}
      </ul>
    </main>
    <Footer />
  </body>
</html>

<style lang="scss">
body {
  display: grid;
  grid: "sitename" auto
        "songs" 1fr
        "footer" auto / minmax(10px, 1168px);
  justify-items: stretch;
  justify-content: center;
  background: hsl(var(--color-shade100));
}

.songs {
  grid-area: songs;
  margin-bottom: 48px;
  padding: 0 16px;
  font-family: var(--font-body);

  @media screen and (min-width: 1200px) {
    padding: 0;
  }
}

.songsList {
  display: grid;
  grid: auto / repeat(auto-fill, minmax(320px, 1fr));
  gap: 32px;
  margin: 0;
  padding: 0;
}
</style>
